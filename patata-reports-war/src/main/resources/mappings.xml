<?xml version="1.0" encoding="UTF-8"?>
<mappings xmlns="http://dozer.sourceforge.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://dozer.sourceforge.net http://dozer.sourceforge.net/schema/beanmapping.xsd">

    <configuration>
        <custom-converters>
            <converter type="com.googlecode.patata.reports.utils.mapper.StringToUUIDConverter">
                <class-a>java.lang.String</class-a>
                <class-b>java.util.UUID</class-b>
            </converter>
        </custom-converters>
    </configuration>
    
    <mapping>
        <class-a>com.googlecode.patata.reports.model.DataSource</class-a>
        <class-b>com.googlecode.patata.reports.dto.DataSourceDto</class-b>
        <field type="one-way">
            <a>id</a>
            <b>id</b>
        </field>
    </mapping>

    <mapping>
        <class-a>com.googlecode.patata.reports.model.ReportTemplate</class-a>
        <class-b>com.googlecode.patata.reports.dto.ReportTemplateDto</class-b>
        <field type="one-way">
            <a>id</a>
            <b>id</b>
        </field>
        <field type="one-way">
            <a>created</a>
            <b>created</b>
        </field>
        <field custom-converter-id="DataSourceToUUIDConverter">
            <a>defaultDatasource</a>
            <b>defaultDatasourceId</b>
        </field>
        <field type="one-way">
            <a>reportDataSources</a>
            <b>reportDataSources</b>
            <a-hint>com.googlecode.patata.reports.model.ReportDataSource</a-hint>
            <b-hint>com.googlecode.patata.reports.dto.ReportDataSourceDto</b-hint>
        </field>
    </mapping>

    <mapping>
        <class-a>com.googlecode.patata.reports.model.ReportDataSource</class-a>
        <class-b>com.googlecode.patata.reports.dto.ReportDataSourceDto</class-b>
        <field type="one-way">
            <a>id</a>
            <b>id</b>
        </field>

        <field custom-converter-id="DataSourceToUUIDConverter">
            <a>dataSource</a>
            <b>datasourceId</b>
        </field>
    </mapping>    

    <mapping>
        <class-a>com.googlecode.patata.reports.model.ReportFolder</class-a>
        <class-b>com.googlecode.patata.reports.dto.ReportFolderDto</class-b>
        <field type="one-way">
            <a>id</a>
            <b>id</b>
        </field>

        <field custom-converter-id="ReportFolderToUUIDConverter">
            <a>parent</a>
            <b>parentId</b>
        </field>
    </mapping>    

    <mapping>
        <class-a>com.googlecode.patata.reports.model.Report</class-a>
        <class-b>com.googlecode.patata.reports.dto.ReportDto</class-b>
        <field type="one-way">
            <a>id</a>
            <b>id</b>
        </field>

        <field custom-converter-id="ReportFolderToUUIDConverter">
            <a>folder</a>
            <b>folderId</b>
        </field>

        <field custom-converter-id="ReportTemplateToUUIDConverter">
            <a>currentTemplate</a>
            <b>currentTemplateId</b>
        </field>
    </mapping>    

    <mapping>
        <class-a>com.googlecode.patata.reports.model.Report</class-a>
        <class-b>com.googlecode.patata.reports.dto.ExtendedReportDto</class-b>

        <field type="one-way">
            <a>id</a>
            <b>id</b>
        </field>

        <field custom-converter-id="ReportFolderToUUIDConverter">
            <a>folder</a>
            <b>folderId</b>
        </field>

        <field type="one-way" custom-converter-id="ReportTemplateToUUIDConverter">
            <a>currentTemplate</a>
            <b>currentTemplateId</b>
        </field>

        <field type="one-way">
            <a>currentTemplate</a>
            <b>currentTemplate</b>
        </field>
    </mapping>
</mappings>
